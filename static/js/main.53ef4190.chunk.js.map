{"version":3,"sources":["reportWebVitals.js","api/security-api.ts","api/auth-api.ts","redux/auth-reducer.ts","redux/app-reducer.ts","components/Navbar/Navbar.tsx","components/News/News.tsx","components/Music/Music.tsx","components/Settings/Settings.tsx","components/common/Paginator/Paginator.tsx","components/Users/User/User.tsx","api/user-api.ts","redux/users/users-reducer.ts","redux/selectors/users-selector.ts","components/Users/SearchUserForm.tsx","components/Users/UsersPage.tsx","components/Login/Login.tsx","redux/sidebar-reducer.ts","api/chat-api.ts","redux/chat-reducer.ts","redux/redux-store.ts","hoc/withSuspense.tsx","Pages/ErrorPage/ErrorPage.tsx","assets/images/logo.png","components/Header/Header.tsx","redux/selectors/app-selector.ts","redux/selectors/chat-selector.ts","Pages/Chat/Chat.tsx","App.tsx","index.tsx","components/Navbar/Navbar.module.css","components/Login/Login.module.css","components/common/Paginator/Paginator.module.css","components/common/Preloader/Preloader.tsx","components/Users/Users.module.css","components/Header/Header.module.css","assets/images/user.png","redux/selectors/auth-selector.ts","components/Users/User/User.module.css","api/profile-api.ts","redux/profile/profile-reducer.ts","redux/dialogs-reducer.ts","components/common/Preloader/Preloader.module.css","api/api.ts"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","securityAPI","instance","get","response","data","authAPI","email","password","rememberMe","captcha","post","delete","initialState","userId","login","isAuthenticated","formServerError","captchaUrl","actions","type","payload","error","getAuthUserData","dispatch","a","resultCode","ResultCodeEnum","Success","id","getCaptchaUrl","url","authReducer","state","action","initialized","appReducer","Navbar","props","className","s","nav","activeClassName","activeLink","to","News","Music","Settings","Paginator","totalCountItems","pageSize","currentPage","onPageChanged","portionSize","pageCount","Math","floor","pages","i","push","window","innerWidth","useState","portionNumber","setPortionNumber","portionCount","ceil","leftPortionPageNumber","rightPortionPageNumber","paginator","arrow","onClick","filter","page","map","selectedPage","User","user","followingInProgress","follow","unfollow","avatar","src","photos","small","userPhoto","alt","name","followed","disabled","some","userAPI","getUsers","term","friend","unfollowUser","followUser","users","totalCountUsers","isFetching","usersCount","requestUsers","items","totalCount","followUnfollowFlow","apiMethod","usersReducer","createSelector","usersPage","getTotalCountUsers","getPageSize","getCurrentPage","getFollowingInProgress","getIsFetching","getUsersFilter","SearchUserForm","React","memo","useSelector","searchForm","enableReinitialize","initialValues","String","onSubmit","values","setSubmitting","onFilterChanged","form","as","select","value","isSubmitting","UsersPage","useDispatch","history","useHistory","useEffect","parsed","queryString","location","search","substr","actualPage","actualFilter","Number","query","pathname","followHandler","bind","unfollowHandler","pageNumber","Preloader","LoginForm","useForm","mode","register","handleSubmit","errors","formState","validators","required","styles","inputText","placeholder","ref","pattern","message","characterRow","labelCheckbox","htmlFor","titleCharacter","serverError","connect","auth","ResultCodeForCapture","CaptchaIsRequired","messages","loginFormWrapper","sidebarReducer","subscribers","ws","closeHandler","notifySubscribersAboutStatusChanged","setTimeout","createChannel","openHandler","errorHandler","console","messageHandler","e","newMessages","JSON","parse","forEach","cleanUp","removeEventListener","status","close","WebSocket","addEventListener","chatAPI","eventName","callback","send","_newMessageHandler","newMessageHandlerCreator","_statusChangedHandler","statusChangedHandlerCreator","chatReducer","m","v1","idx","arr","length","rootReducer","combineReducers","profilePage","profileReducer","dialogsPage","dialogsReducer","sidebar","app","chat","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","withSuspense","Component","Suspense","fallback","ErrorPage","Header","isAuth","selectIsAuth","selectAuthorisedLogin","header","header__wrapper","logo","blockLogin","selectIsInitialized","selectMessages","selectStatusChat","Chat","style","maxWidth","margin","Messages","messageAnchoreRef","useRef","isAutoScroll","setIsAutoScroll","current","scrollIntoView","behavior","height","overflowY","onScroll","target","currentTarget","scrollHeight","scrollTop","clientHeight","Message","textAlign","paddingLeft","display","alignItems","width","borderRadius","photo","userName","padding","SendMessageForm","setMessage","marginTop","marginBottom","onChange","sendMessage","ChatPage","ProfileContainer","lazy","DialogContainer","SuspensedProfile","SuspensedDialog","App","initializeAppHandler","cacthAllUnhandledErrors","alert","exact","path","render","MainApp","ReactDOM","document","getElementById","module","exports","ring","selectAuthorisedUserId","profileAPI","put","filePhoto","formData","FormData","append","profile","posts","countLike","isLiked","serverErrorMessage","addPost","newPostText","setUserProfile","setUserStatus","savePhotoSuccess","setServerError","setLike","getUserProfile","getUserStatus","updateUserStatus","savePhoto","saveProfile","getState","Error","Promise","reject","numberId","newPost","dialogs","newMessageText","deleteMessage","messageId","newMessage","axios","create","withCredentials","baseURL","headers"],"mappings":"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","file":"static/js/main.53ef4190.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { instance } from './api';\r\n\r\ntype GetCaptchaUrlResponseType = { \r\n    url: string\r\n}\r\n\r\nexport const securityAPI = {\r\n    async getCaptchaUrl() {\r\n        const response = await instance.get<GetCaptchaUrlResponseType>(\"security/get-captcha-url\");\r\n        return response.data;\r\n    },\r\n};","import { instance, APIResponseType, ResultCodeEnum, ResultCodeForCapture } from './api';\r\n\r\ntype MeResponseDataType = {\r\n    id: number,\r\n    email: string,\r\n    login: string\r\n}\r\ntype LoginDataType = {\r\n    userId: number;\r\n}\r\n\r\nexport const authAPI = {\r\n    async me() {\r\n        const response = await instance.get<APIResponseType<MeResponseDataType>>(\"auth/me\");\r\n        return response.data;\r\n    },\r\n    async login(email: string, password: string, rememberMe: boolean = false, captcha: null | string = null) {\r\n        const response = await instance.post<APIResponseType<LoginDataType, ResultCodeEnum | ResultCodeForCapture>>(\"auth/login\", { email, password, rememberMe, captcha });\r\n        return response.data;\r\n    },\r\n    async logout() {\r\n        const response = await instance.delete<APIResponseType>(\"auth/login\");\r\n        return response.data;\r\n    },\r\n};","import { securityAPI } from \"./../api/security-api\";\r\nimport { authAPI } from \"./../api/auth-api\";\r\nimport { InferActionsTypes, RootState } from \"./redux-store\";\r\nimport { ThunkAction } from \"redux-thunk\";\r\nimport { ResultCodeEnum, ResultCodeForCapture } from \"../api/api\";\r\n\r\nexport type InitialStateType = typeof initialState;\r\n\r\nlet initialState = {\r\n    userId: null as (null | number),\r\n    login: null as null | string,\r\n    email: null as null | string,\r\n    isAuthenticated: false,\r\n    formServerError: null as null | string,\r\n    captchaUrl: null as null | string,\r\n};\r\n\r\n//state.auth\r\nconst authReducer = (state = initialState, action: ActionTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SN/AUTH/GET_CAPTCHA_URL_SUCCESS':\r\n        case 'SN/AUTH/SET_USER_DATA':\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n            };\r\n        case 'SN/AUTH/SET_SERVER_ERROR':\r\n            return {\r\n                ...state,\r\n                formServerError: action.error,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\ntype ActionTypes = InferActionsTypes<typeof actions>;\r\ntype ThunkType = ThunkAction<Promise<void>, RootState, unknown, ActionTypes>;\r\n\r\nexport const actions = {\r\n    setAuthUserData: (userId: number | null, login: string | null, email: string | null, isAuthenticated: boolean) =>\r\n        ({ type: 'SN/AUTH/SET_USER_DATA', payload: { userId, login, email, isAuthenticated } } as const),\r\n\r\n    getCaptchaUrlSuccess: (captchaUrl: string) =>\r\n        ({type: 'SN/AUTH/GET_CAPTCHA_URL_SUCCESS', payload: { captchaUrl } } as const),\r\n\r\n    setServerError: (error: string) => ({ type: 'SN/AUTH/SET_SERVER_ERROR', error } as const)\r\n}; \r\n\r\nexport const getAuthUserData = (): ThunkType => async (dispatch) => {\r\n    let data = await authAPI.me();\r\n    if (data.resultCode === ResultCodeEnum.Success) {\r\n        let { id, login, email } = data.data;\r\n        dispatch(actions.setAuthUserData(id, login, email, true));\r\n    }\r\n};\r\n\r\nexport const login =\r\n    (email: string, password: string, rememberMe: boolean, captcha: string): ThunkType =>\r\n    async (dispatch) => {\r\n        let data = await authAPI.login(email, password, rememberMe, captcha);\r\n        if (data.resultCode === ResultCodeEnum.Success) {\r\n            dispatch(getAuthUserData());\r\n        } else {\r\n            if (data.resultCode === ResultCodeForCapture.CaptchaIsRequired) {\r\n                dispatch(getCaptchaUrl());\r\n            }\r\n            dispatch(actions.setServerError(data.messages[0]));\r\n        }\r\n    };\r\n\r\nexport const logout = (): ThunkType => async (dispatch) => {\r\n    let data = await authAPI.logout();\r\n    if (data.resultCode === 0) {\r\n        dispatch(actions.setAuthUserData(null, null, null, false));\r\n    }\r\n};\r\n\r\nexport const getCaptchaUrl = (): ThunkType => async (dispatch) => {\r\n    let data = await securityAPI.getCaptchaUrl();\r\n    dispatch(actions.getCaptchaUrlSuccess(data.url));\r\n};\r\n\r\nexport default authReducer;\r\n","import { RootState, InferActionsTypes } from './redux-store';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { getAuthUserData } from './auth-reducer';\r\n\r\nlet initialState = {\r\n    initialized: false,\r\n};\r\n\r\nexport type InitialStateType = typeof initialState;\r\n\r\nconst appReducer = (state = initialState, action: ActionTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SN/APP/INITIALIZED_SUCCESS': {\r\n            return {\r\n                ...state,\r\n                initialized: true,\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\ntype ActionTypes = InferActionsTypes<typeof actions>;\r\ntype ThunkType = ThunkAction<Promise<void> , RootState, unknown, ActionTypes >;\r\n\r\nexport const actions = {\r\n    initializedSuccess: () => ({type: \"SN/APP/INITIALIZED_SUCCESS\"} as const)\r\n}\r\n\r\nexport const initializeApp = (): ThunkType => async (dispatch) => {\r\n    await dispatch(getAuthUserData());\r\n    await dispatch(actions.initializedSuccess());\r\n}\r\n\r\nexport default appReducer;","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport s from \"./Navbar.module.css\";\r\n\r\nconst Navbar: React.FC= (props) => {\r\n    return (\r\n        <nav className={s.nav}>\r\n            <ul>\r\n                <li>\r\n                    <NavLink activeClassName={s.activeLink} to=\"/profile\">Profile</NavLink>\r\n                </li>\r\n                <li>\r\n                    <NavLink activeClassName={s.activeLink} to=\"/dialog\">Messages</NavLink>\r\n                </li>\r\n                <li>\r\n                    <NavLink activeClassName={s.activeLink} to=\"/news\">News</NavLink>\r\n                </li>\r\n                <li>\r\n                    <NavLink activeClassName={s.activeLink} to=\"/music\">Music</NavLink>\r\n                </li>\r\n                <li>\r\n                    <NavLink activeClassName={s.activeLink} to=\"/settings\">Settings</NavLink>\r\n                </li>\r\n                <li>\r\n                    <NavLink activeClassName={s.activeLink} to=\"/users\">Find Users</NavLink>\r\n                </li>\r\n                <li>\r\n                    <NavLink activeClassName={s.activeLink} to=\"/chat\">Chat</NavLink>\r\n                </li>\r\n            </ul>\r\n        </nav>\r\n    );\r\n};\r\n\r\nexport default Navbar;\r\n","import React from \"react\";\r\n// import s from \"./News.module.css\";\r\n\r\nconst News: React.FC = () => {\r\n    return <div>News</div>;\r\n};\r\n\r\nexport default News;\r\n","import React from \"react\";\r\n// import s from \"./Music.module.css\";\r\n\r\nconst Music: React.FC = () => {\r\n    return <div>Music</div>;\r\n};\r\n\r\nexport default Music;\r\n","import React from \"react\";\r\n// import s from \"./Settings.module.css\";\r\n\r\nconst Settings: React.FC = (props) => {\r\n    return <div>Settings</div>;\r\n};\r\n\r\nexport default Settings;","import React, { useState } from \"react\";\r\nimport s from \"./Paginator.module.css\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport ArrowBackIosIcon from \"@material-ui/icons/ArrowBackIos\";\r\n\r\ntype PropTypes = {\r\n    totalCountItems: number,\r\n    pageSize: number,\r\n    currentPage: number,\r\n    portionSize?: number\r\n\r\n    onPageChanged: (page: number) => void,\r\n}\r\n\r\nconst Paginator: React.FC<PropTypes> = ({ totalCountItems, pageSize, currentPage = 1, onPageChanged, portionSize = 10 }) => {\r\n    let pageCount = Math.floor(totalCountItems / pageSize);\r\n    let pages = [];\r\n    for (let i = 1; i <= pageCount; i++) {\r\n        pages.push(i);\r\n    }\r\n    if (window.innerWidth <= 550) {\r\n        portionSize = 5;\r\n    }\r\n    let [portionNumber, setPortionNumber] = useState(currentPage);\r\n    let portionCount = Math.ceil(pageCount / portionSize);\r\n    let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n    let rightPortionPageNumber = portionNumber * portionSize;\r\n\r\n    return (\r\n        <div className={s.paginator}>\r\n            <div className={s.arrow}>\r\n                {portionNumber > 1 && (\r\n                    <div\r\n                        \r\n                        onClick={() => {\r\n                            setPortionNumber(portionNumber - 1);\r\n                        }}\r\n                    >\r\n                        <ArrowBackIosIcon />\r\n                    </div>\r\n                )}\r\n            </div>\r\n            {pages\r\n                .filter((page) => page >= leftPortionPageNumber && page <= rightPortionPageNumber)\r\n                .map((page) => (\r\n                    <span\r\n                        key={page}\r\n                        className={currentPage === page ? s.page + \" \" + s.selectedPage : s.page}\r\n                        onClick={() => onPageChanged(page)}\r\n                    >\r\n                        {page}\r\n                    </span>\r\n                ))}\r\n            <div className={s.arrow}>\r\n                {portionCount > portionNumber && (\r\n                    <div\r\n                        \r\n                        onClick={() => {\r\n                            setPortionNumber(portionNumber + 1);\r\n                        }}\r\n                    >\r\n                        <ArrowForwardIosIcon />\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Paginator;","import React from \"react\";\r\nimport s from \"./User.module.css\";\r\nimport userPhoto from \"./../../../assets/images/user.png\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { UserType } from \"../../../types/types\";\r\n\r\ntype PropType = {\r\n    user: UserType;\r\n    followingInProgress: Array<number>;\r\n    follow: (id: number) => void;\r\n    unfollow: (id: number) => void;\r\n};\r\n\r\nconst User: React.FC<PropType> = ({ user, followingInProgress, follow, unfollow }) => {\r\n    return (\r\n        <div className={s.user} key={user.id}>\r\n            <div>\r\n                <NavLink to={\"/profile/\" + user.id}>\r\n                    <img className={s.avatar} src={user.photos.small ? user.photos.small : userPhoto} alt=\"avatar\" />\r\n                </NavLink>\r\n            </div>\r\n            <div>{user.name}</div>\r\n            {user.followed ? (\r\n                <button\r\n                    disabled={followingInProgress.some((id) => id === user.id)}\r\n                    onClick={() => {\r\n                        unfollow(user.id);\r\n                    }}\r\n                >\r\n                    Unfollow\r\n                </button>\r\n            ) : (\r\n                <button\r\n                    disabled={followingInProgress.some((id) => id === user.id)}\r\n                    onClick={() => {\r\n                        follow(user.id);\r\n                    }}\r\n                >\r\n                    Follow\r\n                </button>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default User;\r\n","import { instance, APIResponseType, GetUsersResponseType } from './api';\r\n\r\nexport const userAPI = {\r\n    async getUsers(currentPage: number, pageSize: number, term = '', friend: null | boolean ) {\r\n        const response = await instance.get<GetUsersResponseType>(\r\n            `users?page=${currentPage}&count=${pageSize}&term=${term}` + (friend === null ? '' : `&friend=${friend}`)\r\n        );\r\n        return response.data;\r\n    },\r\n    async unfollowUser(userId: number) {\r\n        const response = await instance.delete<APIResponseType>(`follow/${userId}`);\r\n        return response.data;\r\n    },\r\n    async followUser(userId: number) {\r\n        const response = await instance.post<APIResponseType>(`follow/${userId}`);\r\n        return response.data;\r\n    },\r\n};","import { userAPI } from '../../api/user-api';\r\nimport { InferActionsTypes, RootState } from \"../redux-store\";\r\nimport { Dispatch } from \"react\";\r\nimport { ThunkAction } from \"redux-thunk\";\r\nimport { UserType } from \"../../types/types\";\r\n\r\nlet initialState = {\r\n    users: [] as Array<UserType>,\r\n    totalCountUsers: 10,\r\n    pageSize: 21,\r\n    currentPage: 1,\r\n    isFetching: true,\r\n    followingInProgress: [] as Array<number>, // array users id\r\n    filter: {\r\n        term: '',\r\n        friend: null as null | boolean  \r\n    } \r\n};\r\n\r\nexport type FilterType = {\r\n    term: string,\r\n    friend: null | boolean\r\n}\r\n\r\nexport type InitialStateType = typeof initialState;\r\n\r\nconst usersReducer = (state = initialState, action: ActionTypes) => {\r\n    switch (action.type) {\r\n        case 'TOOGLE_FOLLOW': {\r\n            return {\r\n                ...state,\r\n                users: state.users.map((user: UserType) => {\r\n                    if (user.id === action.userId) {\r\n                        return { ...user, followed: (!user.followed) };\r\n                    }\r\n                    return user;\r\n                }),\r\n            };\r\n        }\r\n        case 'SET_USERS': {\r\n            return { ...state, users: action.users };\r\n        }\r\n        case 'SET_PAGE': {\r\n            return { ...state, currentPage: action.page };\r\n        }\r\n        case 'SET_TOTAL_USERS_COUNT': {\r\n            return { ...state, totalCountUsers: action.usersCount };\r\n        }\r\n        case 'SET_FILTER': {\r\n            return { ...state, filter: action.payload };\r\n        }\r\n        case 'TOOGLE_IS_FETCHING': {\r\n            return { ...state, isFetching: action.isFetching };\r\n        }\r\n        case 'TOOGLE_IS_FOLLOWING_PROGRESS': {\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter((id) => id !== action.userId),\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\ntype ActionTypes = InferActionsTypes<typeof actions>;\r\n    \r\ntype DispatchType = Dispatch<ActionTypes> & Dispatch<ThunkType>;\r\ntype ThunkType = ThunkAction<Promise<void>, RootState, unknown, ActionTypes>;\r\n\r\nexport const actions = {\r\n    toggleFollow: (userId: number) => ({ type: \"TOOGLE_FOLLOW\", userId } as const),\r\n    setUsers: (users: Array<UserType>) => ({ type: \"SET_USERS\", users } as const),\r\n    setFilter: (filter: FilterType) => ({ type: \"SET_FILTER\", payload: filter} as const),\r\n    setCurrentPage: (page: number) => ({ type: \"SET_PAGE\", page } as const),\r\n    setTotalUsersCount: (usersCount: number) =>\r\n        ({\r\n            type: \"SET_TOTAL_USERS_COUNT\",\r\n            usersCount,\r\n        } as const),\r\n    toogleIsFetching: (isFetching: boolean) =>\r\n        ({\r\n            type: \"TOOGLE_IS_FETCHING\",\r\n            isFetching,\r\n        } as const),\r\n    toogleFollowingProgress: (isFetching: boolean, userId: number) =>\r\n        ({\r\n            type: \"TOOGLE_IS_FOLLOWING_PROGRESS\",\r\n            isFetching,\r\n            userId,\r\n        } as const),\r\n};\r\n\r\nexport const requestUsers = (page: number, pageSize: number, filter: FilterType ): ThunkType => {\r\n    return async (dispatch) => {\r\n        dispatch(actions.setUsers([]));\r\n        dispatch(actions.setCurrentPage(page));\r\n        dispatch(actions.toogleIsFetching(true));\r\n        dispatch(actions.setFilter(filter));\r\n\r\n        let data = await userAPI.getUsers(page, pageSize, filter.term, filter.friend);\r\n\r\n        dispatch(actions.toogleIsFetching(false));\r\n        dispatch(actions.setUsers(data.items));\r\n        dispatch(actions.setTotalUsersCount(data.totalCount));\r\n    };\r\n};\r\n\r\nconst followUnfollowFlow = async (dispatch: DispatchType, userId: number, apiMethod: any) => {\r\n    dispatch(actions.toogleFollowingProgress(true, userId));\r\n    let data = await apiMethod(userId);\r\n    if (data.resultCode === 0) {\r\n        dispatch(actions.toggleFollow(userId));\r\n    }\r\n    dispatch(actions.toogleFollowingProgress(false, userId));\r\n};\r\n\r\nexport const follow = (userId: number): ThunkType => {\r\n    return async (dispatch) => {\r\n        followUnfollowFlow(dispatch, userId, userAPI.followUser.bind(userAPI));\r\n    };\r\n};\r\n\r\nexport const unfollow = (userId: number): ThunkType => {\r\n    return async (dispatch) => {\r\n        followUnfollowFlow(dispatch, userId, userAPI.unfollowUser.bind(userAPI));\r\n    };\r\n};\r\n\r\nexport default usersReducer;","import { RootState } from '../redux-store';\r\nimport { createSelector } from \"reselect\";\r\n\r\nconst getUsersSelector = (state: RootState) => {\r\n    return state.usersPage.users;\r\n};\r\n\r\nexport const getUsers = createSelector(getUsersSelector, (users) => {\r\n    return users.filter(user => true);  \r\n})\r\n\r\nexport const getTotalCountUsers = (state: RootState) => {\r\n    return state.usersPage.totalCountUsers;\r\n};\r\nexport const getPageSize = (state: RootState) => {\r\n    return state.usersPage.pageSize;\r\n};\r\nexport const getCurrentPage = (state: RootState) => {\r\n    return state.usersPage.currentPage;\r\n};\r\nexport const getFollowingInProgress = (state: RootState) => {\r\n    return state.usersPage.followingInProgress;\r\n};\r\nexport const getIsFetching = (state: RootState) => {\r\n    return state.usersPage.isFetching;\r\n}\r\nexport const getUsersFilter = (state: RootState) => {\r\n    return state.usersPage.filter;\r\n}","import React from \"react\";\r\nimport { Field, Form, Formik } from \"formik\";\r\nimport { FilterType } from \"../../redux/users/users-reducer\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getUsersFilter } from \"../../redux/selectors/users-selector\";\r\nimport s from \"./Users.module.css\";\r\n\r\ntype FriendFormType = \"null\" | \"true\" | \"false\";\r\n\r\ntype FormValuesType = {\r\n    term: string;\r\n    friend: FriendFormType;\r\n};\r\ntype PropType = {\r\n    onFilterChanged: (filter: FilterType) => void;\r\n};\r\n\r\nconst SearchUserForm: React.FC<PropType> = React.memo((props) => {\r\n    const onSubmit = (\r\n        values: FormValuesType,\r\n        { setSubmitting }: { setSubmitting: (isSubmitting: boolean) => void }\r\n    ) => {\r\n        const filter = {\r\n            term: values.term,\r\n            friend: values.friend === \"null\" ? null : values.friend === \"true\" ? true : false,\r\n        };\r\n\r\n        props.onFilterChanged(filter);\r\n        setSubmitting(false);\r\n    };\r\n\r\n    const filter = useSelector(getUsersFilter);\r\n\r\n    return (\r\n        <div className={s.searchForm}>\r\n            <Formik\r\n                enableReinitialize\r\n                initialValues={{ term: filter.term, friend: String(filter.friend) as FriendFormType }}\r\n                onSubmit={onSubmit}\r\n            >\r\n                {(props) => (\r\n                    <Form className={s.form}>\r\n                        <Field type=\"text\" name=\"term\" />\r\n                        <Field as='select' className={s.select} name=\"friend\">\r\n                            <option value=\"null\">All</option>\r\n                            <option value=\"true\">Followed</option>\r\n                            <option value=\"false\">Unfollowed</option>\r\n                        </Field>\r\n                        <button type=\"submit\" disabled={props.isSubmitting}>\r\n                            Search\r\n                        </button>\r\n                    </Form>\r\n                )}\r\n            </Formik>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default SearchUserForm;\r\n","import React, { useEffect } from \"react\";\r\nimport s from \"./Users.module.css\";\r\nimport Paginator from \"../common/Paginator/Paginator\";\r\nimport User from './User/User';\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport { FilterType, follow, requestUsers, unfollow } from \"../../redux/users/users-reducer\";\r\nimport SearchUserForm from \"./SearchUserForm\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getCurrentPage, getFollowingInProgress, getIsFetching, getPageSize, getTotalCountUsers, getUsers, getUsersFilter } from \"../../redux/selectors/users-selector\";\r\nimport { useHistory } from \"react-router\";\r\nimport * as queryString from 'querystring';\r\n\r\nconst UsersPage: React.FC = () => {\r\n\r\n    const users = useSelector(getUsers);\r\n    const totalCountUsers= useSelector(getTotalCountUsers);\r\n    const pageSize = useSelector(getPageSize);\r\n    const currentPage = useSelector(getCurrentPage);\r\n    const followingInProgress = useSelector(getFollowingInProgress);\r\n    const isFetching = useSelector(getIsFetching);\r\n    const filter = useSelector(getUsersFilter);\r\n\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n\r\n    type SearchType = {\r\n        term?: string,\r\n        friend?: string,\r\n        page?: string\r\n    }\r\n    \r\n    useEffect(() => {\r\n        const parsed = queryString.parse(history.location.search.substr(1)) as SearchType;\r\n        \r\n        let actualPage = currentPage;\r\n        let actualFilter = filter;\r\n\r\n        if(!!parsed.page) {actualPage = Number(parsed.page)};\r\n        if(!!parsed.term) actualFilter = {...actualFilter, term: parsed.term };\r\n        if(!!parsed.friend) actualFilter = {...actualFilter, friend: parsed.friend === 'null' ? null : parsed.friend === 'true' ? true : false};\r\n\r\n        dispatch(requestUsers(actualPage, pageSize, actualFilter));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    },[])\r\n\r\n    useEffect(() => {\r\n        const query: SearchType = {};\r\n        if(!!filter.term) query.term = filter.term;\r\n        if(filter.friend !== null) query.friend = String(filter.friend);\r\n        if(currentPage !== 1) query.page = String(currentPage);\r\n        history.push({\r\n            pathname: '/users',\r\n            search: queryString.stringify(query),\r\n        })\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    },[filter, currentPage])\r\n\r\n    const onPageChanged = (pageNumber: number) => {\r\n        dispatch(requestUsers(pageNumber, pageSize, filter));\r\n    };\r\n\r\n    const onFilterChanged = (filter: FilterType) => {\r\n        dispatch(requestUsers(1, pageSize, filter));\r\n    };\r\n\r\n    const followHandler = (userId: number) => {\r\n        dispatch(follow(userId));\r\n    }\r\n    const unfollowHandler = (userId: number) => {\r\n        dispatch(unfollow(userId));\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Paginator\r\n                totalCountItems={totalCountUsers}\r\n                pageSize={pageSize}\r\n                currentPage={currentPage}\r\n                onPageChanged={onPageChanged}\r\n            />\r\n            \r\n            <SearchUserForm onFilterChanged={onFilterChanged}/>\r\n            <div className={s.users}>\r\n                {users.map((user) => (\r\n                    <User\r\n                        key={user.id}\r\n                        user={user}\r\n                        unfollow={unfollowHandler}\r\n                        follow={followHandler}\r\n                        followingInProgress={followingInProgress}\r\n                    />\r\n                ))}\r\n            </div>\r\n            {isFetching ? <Preloader /> : null}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UsersPage;\r\n","import React from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { connect } from \"react-redux\";\r\nimport styles from \"./Login.module.css\";\r\nimport { login } from '../../redux/auth-reducer';\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { RootState } from \"../../redux/redux-store\";\r\n\r\ntype PropFormType = {\r\n    formServerError: string | null,\r\n    captchaUrl: string | null,\r\n    login: (email: string, password: string, rememberMe: boolean, captcha: string) => void\r\n}\r\n\r\ntype DataType = {\r\n    email: string,\r\n    password: string,\r\n    rememberMe: boolean,\r\n    captcha: string\r\n}\r\n\r\nconst LoginForm: React.FC<PropFormType>= (props) => {\r\n    const { register, handleSubmit, formState: { errors } } = useForm({\r\n        mode: \"onChange\"\r\n      });\r\n    const onSubmit = (data: DataType) => {\r\n        props.login(data.email, data.password, data.rememberMe, data.captcha);\r\n    };\r\n\r\n    const validators = {\r\n        required: \"Field is fill\",\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n            <div >\r\n                <input\r\n                    className={styles.inputText}\r\n                    name=\"email\"\r\n                    placeholder=\"email\"\r\n                    ref={register({\r\n                        ...validators,\r\n                        pattern: {\r\n                            value: /^[a-zA-Z0-9.!#$%&*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/,\r\n                            message: \"Invalid email address\",\r\n                        },\r\n                    })}\r\n                />\r\n                {errors.email && <p>{errors.email.message}</p>}\r\n            </div>\r\n            <div>\r\n                <input\r\n                    className={styles.inputText}\r\n                    name=\"password\"\r\n                    placeholder=\"password\"\r\n                    type=\"password\"\r\n                    ref={register({ ...validators })}\r\n                />\r\n                {errors.password && <p>{errors.password.message}</p>}\r\n            </div>\r\n            <div className={styles.characterRow}>\r\n                    <input id=\"rememberMe\" name=\"rememberMe\" type=\"checkbox\" ref={register} />\r\n                    <label className={styles.labelCheckbox} htmlFor=\"rememberMe\">\r\n                        <span className={styles.titleCharacter}>Remember me</span>\r\n                    </label>\r\n            </div>\r\n            {props.captchaUrl && <img src={props.captchaUrl} alt=\"Captcha\" /> } \r\n            {props.captchaUrl && \r\n            <div>\r\n                <input\r\n                    className={styles.inputText}\r\n                    name=\"captcha\"\r\n                    placeholder=\"captcha\"\r\n                    ref={register({ ...validators })}\r\n                />\r\n                {errors.captcha && <p>{errors.captcha.message}</p>}\r\n            </div>}   \r\n            <div>\r\n                <button type=\"submit\">Send</button>\r\n            </div>\r\n            {props.formServerError ? <div className={styles.serverError}>{ props.formServerError }</div> : null}\r\n        </form>\r\n    );\r\n};\r\n\r\nconst Login: React.FC<PropType> = (props) => {\r\n    if (props.isAuthenticated) {\r\n        return <Redirect to={'/profile'} />;\r\n    }\r\n    return (\r\n        <div className={styles.loginFormWrapper}>\r\n            <h1>Login</h1>\r\n            <LoginForm formServerError={props.formServerError} captchaUrl={props.captchaUrl} login={props.login} />\r\n        </div>\r\n    );\r\n};\r\n\r\ntype MapStateToPropsType = {\r\n    isAuthenticated: boolean,\r\n    formServerError: string | null,\r\n    captchaUrl: string | null,\r\n};\r\ntype MapDispatchToPropsType = {\r\n    login: (email: string, password: string, rememberMe: boolean, captcha: string) => void\r\n};\r\ntype OwnPropsType = {};\r\n\r\ntype PropType = MapStateToPropsType & MapDispatchToPropsType & OwnPropsType;\r\n\r\nconst mapStateToProps = (state: RootState): MapStateToPropsType=> {\r\n    return {\r\n        isAuthenticated: state.auth.isAuthenticated,\r\n        formServerError: state.auth.formServerError,\r\n        captchaUrl: state.auth.captchaUrl\r\n    }\r\n}\r\n\r\nexport default connect<MapStateToPropsType, MapDispatchToPropsType, OwnPropsType, RootState>(mapStateToProps, {\r\n    login,\r\n})(Login);\r\n","import { InferActionsTypes } from \"./redux-store\";\r\n\r\nlet initialState = {};\r\n\r\nexport type InitialStateType = typeof initialState; \r\n\r\ntype ActionTypes = InferActionsTypes<typeof actions>;\r\n\r\nexport const actions = {};\r\n\r\nconst sidebarReducer = (state = initialState, action: ActionTypes): InitialStateType => {\r\n    return state;\r\n};\r\n\r\nexport default sidebarReducer;\r\n","let subscribers = {\r\n    'message-received': [] as MessageReceivedSubscriberType[],\r\n    'status-changed': [] as StatusChangedSubscriberType[],\r\n};\r\n\r\nlet ws: WebSocket | null = null;\r\n\r\nconst closeHandler = () => {\r\n    notifySubscribersAboutStatusChanged('close');\r\n    setTimeout(createChannel, 3000);\r\n};\r\nconst openHandler = () => {\r\n    notifySubscribersAboutStatusChanged('ready');\r\n};\r\nconst errorHandler = () => {\r\n    notifySubscribersAboutStatusChanged('error');\r\n    console.error('Some error occured. Refresh page')\r\n};\r\n\r\nconst messageHandler = (e: MessageEvent) => {\r\n    let newMessages = JSON.parse(e.data);\r\n    subscribers['message-received'].forEach((s) => s(newMessages));\r\n};\r\n\r\nconst cleanUp = () => {\r\n    ws?.removeEventListener(\"close\", closeHandler);\r\n    ws?.removeEventListener(\"message\", messageHandler);\r\n    ws?.removeEventListener(\"open\", openHandler);\r\n    ws?.removeEventListener(\"error\", errorHandler);\r\n}\r\n\r\nconst notifySubscribersAboutStatusChanged = (status: StatusType) => {\r\n    subscribers['status-changed'].forEach((s) => s(status));\r\n}\r\n\r\nfunction createChannel() {\r\n    cleanUp();\r\n    ws?.close();\r\n    ws = new WebSocket(\"wss://social-network.samuraijs.com/handlers/ChatHandler.ashx\");\r\n    notifySubscribersAboutStatusChanged('pending');\r\n    ws?.addEventListener(\"close\", closeHandler);\r\n    ws?.addEventListener(\"message\", messageHandler);\r\n    ws?.addEventListener(\"open\", openHandler);\r\n    ws?.addEventListener(\"error\", errorHandler);\r\n}\r\n\r\nexport const chatAPI = {\r\n    start() {\r\n        createChannel();\r\n    },\r\n    stop() {\r\n        subscribers['message-received'] = [];\r\n        subscribers['status-changed'] = [];\r\n        cleanUp();\r\n        ws?.close();\r\n    },\r\n    subscribe(eventName: EventsNameType, callback: MessageReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        //@ts-ignore\r\n        subscribers[eventName].push(callback);\r\n        return () => {\r\n            //@ts-ignore\r\n            subscribers[eventName] = subscribers[eventName].filter((s) => s !== callback);\r\n        };\r\n    },\r\n    unsubscribe(eventName: EventsNameType, callback: MessageReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        //@ts-ignore\r\n        subscribers[eventName] = subscribers[eventName].filter((s) => s !== callback);\r\n    },\r\n    sendMessage(message: string) {\r\n        ws?.send(message);\r\n    },\r\n};\r\n\r\ntype MessageReceivedSubscriberType = (messages: ChatMessageAPIType[]) => void;\r\ntype StatusChangedSubscriberType = (status: StatusType) => void;\r\n\r\nexport type ChatMessageAPIType = {\r\n    message: string;\r\n    photo: string;\r\n    userId: number;\r\n    userName: string;\r\n};\r\n\r\nexport type StatusType = 'pending' | 'ready' | 'close' | 'error';\r\n\r\ntype EventsNameType = 'message-received' | 'status-changed'\r\n","import { ChatMessageAPIType, chatAPI, StatusType } from './../api/chat-api';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { Dispatch } from 'react';\r\nimport { InferActionsTypes, RootState } from './redux-store';\r\nimport {v1} from 'uuid';\r\n\r\ntype ActionTypes = InferActionsTypes<typeof actions>;\r\ntype DispatchType = Dispatch<ActionTypes> & Dispatch<ThunkType>;\r\ntype ThunkType = ThunkAction<Promise<void>, RootState, unknown, ActionTypes>;\r\nexport type ChatMessageType = ChatMessageAPIType &  {id: string} ;\r\n\r\nlet initialState = {\r\n    messages: [] as ChatMessageType[],\r\n    status: 'pending' as StatusType\r\n};\r\n\r\nexport type InitialStateType = typeof initialState;\r\n\r\nconst chatReducer = (state = initialState, action: ActionTypes) => {\r\n    switch (action.type) {\r\n        case 'sn/chat/MESSAGES_RECEIVED': {\r\n            return { ...state, messages: [...state.messages, ...action.payload.messages.map((m) => ({...m, id: v1()}))]\r\n                .filter((m,idx ,arr) => () => arr.length - 100) };\r\n        }\r\n        case 'sn/chat/STATUS_CHANGED': {\r\n            return { ...state, status: action.payload.status };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const actions = {\r\n    messagesReceived: (messages: ChatMessageAPIType[]) => ({ type: \"sn/chat/MESSAGES_RECEIVED\", payload: { messages} } as const),\r\n    statusChanged: (status: StatusType) => ({ type: \"sn/chat/STATUS_CHANGED\", payload: { status} } as const),\r\n};\r\n\r\nlet _newMessageHandler: ((messages: ChatMessageAPIType[]) => void) | null = null;\r\nlet newMessageHandlerCreator = (dispatch: DispatchType) => {\r\n    if (_newMessageHandler === null) {\r\n        _newMessageHandler = (messages) => {\r\n            dispatch(actions.messagesReceived(messages));\r\n       }\r\n    }\r\n    return _newMessageHandler\r\n}\r\n\r\nlet _statusChangedHandler: ((status: StatusType) => void) | null = null;\r\nlet statusChangedHandlerCreator = (dispatch: DispatchType) => {\r\n    if (_statusChangedHandler === null) {\r\n        _statusChangedHandler = (status) => {\r\n            dispatch(actions.statusChanged(status));\r\n       }\r\n    }\r\n    return _statusChangedHandler\r\n}\r\n\r\nexport const startMessageListening = (): ThunkType => async (dispatch) => {\r\n    chatAPI.start();\r\n    chatAPI.subscribe('message-received', newMessageHandlerCreator(dispatch));\r\n    chatAPI.subscribe('status-changed', statusChangedHandlerCreator(dispatch));\r\n};\r\n\r\nexport const stopMessageListening = (): ThunkType => async (dispatch) => {\r\n    chatAPI.stop();\r\n    chatAPI.unsubscribe('message-received', newMessageHandlerCreator(dispatch));\r\n    chatAPI.unsubscribe('status-changed', statusChangedHandlerCreator(dispatch));\r\n};\r\n\r\nexport const sendMessage = (message: string): ThunkType => async (dispatch) => {\r\n    chatAPI.sendMessage(message);\r\n};\r\n\r\nexport default chatReducer;","import dialogsReducer from \"./dialogs-reducer\";\r\nimport profileReducer from \"./profile/profile-reducer\";\r\nimport sidebarReducer from \"./sidebar-reducer\";\r\nimport usersReducer from './users/users-reducer';\r\nimport { combineReducers, createStore, applyMiddleware, compose } from 'redux';\r\nimport authReducer from \"./auth-reducer\";\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport appReducer from './app-reducer';\r\nimport chatReducer from \"./chat-reducer\";\r\n\r\n\r\nlet rootReducer = combineReducers({ \r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    sidebar: sidebarReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    app: appReducer,\r\n    chat: chatReducer,\r\n})\r\n\r\nexport type AppDispatch = typeof store.dispatch;\r\nexport type RootState = ReturnType<typeof rootReducer>;\r\nexport type InferActionsTypes<T> = T extends { [keys: string]: (...args: any[]) => infer U } ? U : never;\r\n\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n\r\n// @ts-ignore\r\nwindow.store = store;\r\n\r\nexport default store;","import React from \"react\";\r\nimport Preloader from '../components/common/Preloader/Preloader';\r\n\r\nexport const withSuspense = <WSP extends object>(Component: React.ComponentType<WSP>) => {\r\n    return (props: WSP) => {\r\n        return (\r\n            <React.Suspense fallback={<Preloader />}>\r\n                <Component {...props as WSP}/>\r\n            </React.Suspense>\r\n        );\r\n    };\r\n};\r\n\r\n","import React from \"react\";\r\n\r\nconst ErrorPage: React.FC = (props) => {\r\n    return <div>404 Not Found</div>;\r\n};\r\n\r\nexport default ErrorPage;\r\n","export default __webpack_public_path__ + \"static/media/logo.36b5fb5f.png\";","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport s from \"./Header.module.css\";\r\nimport logo from '../../assets/images/logo.png'; \r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { selectIsAuth, selectAuthorisedLogin } from \"../../redux/selectors/auth-selector\";\r\nimport { logout } from \"../../redux/auth-reducer\";\r\n\r\n\r\nexport const Header: React.FC= () => {\r\n\r\n    const isAuth = useSelector(selectIsAuth);\r\n    const login = useSelector(selectAuthorisedLogin);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const logoutHandler = () => {\r\n        dispatch(logout());\r\n    };\r\n\r\n\r\n    return (\r\n        <header className={s.header}>\r\n            <div className={s.header__wrapper}>\r\n                <NavLink to={\"/\"}>\r\n                    <img\r\n                        className={s.logo}\r\n                        src={logo}\r\n                        alt=\"logo\"\r\n                    />\r\n                </NavLink>\r\n                \r\n                <div className={s.blockLogin}>\r\n                    {isAuth \r\n                        ? <div>{login} <button onClick={logoutHandler}>LogOut</button></div>\r\n                        : <NavLink to={'/login'}>Login</NavLink>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n};","import { RootState } from '../redux-store';\r\n\r\nexport const selectIsInitialized = (state: RootState) => {\r\n    return state.app.initialized;\r\n}","import { RootState } from '../redux-store';\r\n\r\nexport const selectMessages = (state: RootState) => {\r\n    return state.chat.messages;\r\n}\r\n\r\nexport const selectStatusChat = (state: RootState) => {\r\n    return state.chat.status;\r\n}\r\n\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { sendMessage, startMessageListening, stopMessageListening, ChatMessageType } from \"../../redux/chat-reducer\";\r\nimport { selectMessages, selectStatusChat } from \"../../redux/selectors/chat-selector\";\r\nimport user from '../../assets/images/user.png';\r\n\r\nconst ChatPage: React.FC = () => {\r\n    return (\r\n        <Chat />\r\n    )\r\n}\r\n\r\nconst Chat: React.FC = () => {\r\n    const dispatch = useDispatch();\r\n    useEffect(() => {\r\n        dispatch(startMessageListening());\r\n        return () => {\r\n            dispatch(stopMessageListening());\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div style={{ maxWidth: '800px', margin: '0 auto' }}>\r\n            <Messages />\r\n            <SendMessageForm />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Messages: React.FC = () => {\r\n    let messageAnchoreRef = useRef<HTMLDivElement>(null);\r\n    const [isAutoScroll, setIsAutoScroll] = useState(false);\r\n    let messages = useSelector(selectMessages);\r\n\r\n    useEffect(() => {\r\n        if (isAutoScroll) {\r\n            messageAnchoreRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n        }\r\n    }, [messages])\r\n\r\n    const scrollHandler = (e: React.UIEvent<HTMLDivElement, UIEvent>) => {\r\n        let target = e.currentTarget;\r\n        if (target.scrollHeight - target.scrollTop === target.clientHeight) {\r\n            setIsAutoScroll(true);\r\n        } else {\r\n            setIsAutoScroll(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div style={{ height: '70vh', overflowY: 'scroll' }} onScroll={scrollHandler}>\r\n            {messages.map((m, idx) => <Message message={m} key={m.id} />)}\r\n            <div ref={messageAnchoreRef} ></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Message: React.FC<{ message: ChatMessageType }> = React.memo(({ message }) => {\r\n    return (\r\n        <div>\r\n            <div style={{ textAlign: 'left', paddingLeft: '10px', display: 'flex', alignItems: 'center' }}>\r\n                <img style={{ width: '30px', borderRadius: '50%',  }} src={message.photo ? message.photo : user } alt=\"avatar\" />\r\n                <span style={{paddingLeft: '10px'}}>{message.userName}</span>\r\n            </div>\r\n            <div style={{textAlign: 'left', padding: '10px'}}>{message.message}</div>\r\n            <hr />\r\n        </div>\r\n    );\r\n})\r\n\r\nconst SendMessageForm: React.FC = () => {\r\n    const [message, setMessage] = useState('');\r\n    const dispatch = useDispatch();\r\n    let status = useSelector(selectStatusChat);\r\n\r\n    const sendMessageHandler = () => {\r\n        if (!message) {\r\n            return;\r\n        }\r\n        dispatch(sendMessage(message));\r\n        setMessage('');\r\n    }\r\n\r\n    return (\r\n        <div style={{marginTop: '10px', marginBottom: '10px'}}>\r\n            <div>\r\n                <textarea onChange={(e) => setMessage(e.currentTarget.value)} value={message}></textarea>\r\n            </div>\r\n            <div>\r\n                <button disabled={status !== 'ready'} onClick={sendMessageHandler}>Send</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChatPage;\r\n","import React, { useEffect } from \"react\";\r\nimport { HashRouter, Redirect, Route, Switch } from \"react-router-dom\";\r\nimport \"./App.css\";\r\nimport { initializeApp } from \"./redux/app-reducer\";\r\n\r\n//Components\r\nimport Navbar from \"./components/Navbar/Navbar\";\r\nimport News from \"./components/News/News\";\r\nimport Music from \"./components/Music/Music\";\r\nimport Settings from \"./components/Settings/Settings\";\r\nimport UsersPage from \"./components/Users/UsersPage\";\r\nimport Login from \"./components/Login/Login\";\r\nimport { Provider, useDispatch, useSelector } from \"react-redux\";\r\nimport Preloader from \"./components/common/Preloader/Preloader\";\r\nimport store from \"./redux/redux-store\";\r\nimport { withSuspense } from \"./hoc/withSuspense\";\r\nimport ErrorPage from \"./Pages/ErrorPage/ErrorPage\";\r\nimport { Header } from \"./components/Header/Header\";\r\nimport { selectIsInitialized } from \"./redux/selectors/app-selector\";\r\nimport ChatPage from \"./Pages/Chat/Chat\";\r\n\r\nlet ProfileContainer = React.lazy(() => import(\"./components/Profile/ProfileContainer\"));\r\nlet DialogContainer = React.lazy(() => import(\"./components/Dialog/Dialog\"));\r\n\r\nlet SuspensedProfile = withSuspense(ProfileContainer);\r\nlet SuspensedDialog = withSuspense(DialogContainer);\r\n\r\nconst App: React.FC = () => {\r\n    const initialized = useSelector(selectIsInitialized);\r\n\r\n    const dispatch = useDispatch();\r\n    const initializeAppHandler = () => {\r\n        dispatch(initializeApp());\r\n    };\r\n    const cacthAllUnhandledErrors = (e: PromiseRejectionEvent) => {\r\n        alert(\"Some error occured\");\r\n    };\r\n\r\n    useEffect(() => {\r\n        initializeAppHandler();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"unhandledrejection\", cacthAllUnhandledErrors);\r\n        return () => {\r\n            window.removeEventListener(\"unhandledrejection\", cacthAllUnhandledErrors);\r\n        };\r\n    }, []);\r\n\r\n    if (!initialized) {\r\n        return <Preloader />;\r\n    }\r\n    return (\r\n        <div className=\"container\">\r\n            <Header />\r\n            <Navbar />\r\n            <div className=\"body__wrapper\">\r\n                <Switch>\r\n                    <Route\r\n                        exact\r\n                        path=\"/\"\r\n                        render={() => {\r\n                            return <Redirect to=\"/profile\" />;\r\n                        }}\r\n                    />\r\n                    <Route path=\"/profile/:userId?\" render={() => <SuspensedProfile />} />\r\n                    <Route path=\"/dialog\" render={() => <SuspensedDialog />} />\r\n                    <Route path=\"/news\" render={() => <News />} />\r\n                    <Route path=\"/music\" render={() => <Music />} />\r\n                    <Route path=\"/settings\" render={() => <Settings />} />\r\n                    <Route path=\"/users\" render={() => <UsersPage />} />\r\n                    <Route path=\"/login\" render={() => <Login />} />\r\n                    <Route path=\"/chat\" render={() => <ChatPage />} />\r\n                    <Route path=\"*\" render={() => <ErrorPage />} />\r\n                </Switch>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst MainApp: React.FC = () => {\r\n    return (\r\n        <HashRouter>\r\n            <Provider store={store}>\r\n                <App />\r\n            </Provider>\r\n        </HashRouter>\r\n    );\r\n};\r\n\r\nexport default MainApp;\r\n","import reportWebVitals from \"./reportWebVitals\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport MainApp from \"./App\";\r\n\r\nReactDOM.render(<MainApp />, document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__3Fn8d\",\"activeLink\":\"Navbar_activeLink__1NNPS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputText\":\"Login_inputText__1ebWd\",\"serverError\":\"Login_serverError__2ocVA\",\"labelCheckbox\":\"Login_labelCheckbox__2lj8p\",\"loginFormWrapper\":\"Login_loginFormWrapper__zRauC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"Paginator_paginator__1RJj2\",\"page\":\"Paginator_page__3N0wQ\",\"selectedPage\":\"Paginator_selectedPage__3bfcP\",\"arrow\":\"Paginator_arrow__2shGD\"};","import React from \"react\";\r\nimport s from \"./Preloader.module.css\";\r\n\r\nconst Preloader: React.FC = (props) => {\r\n    return (\r\n        <div className={s.ring}>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Preloader;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"users\":\"Users_users__1Dm2v\",\"user\":\"Users_user__i4fi9\",\"avatar\":\"Users_avatar__YBsNK\",\"selectedPage\":\"Users_selectedPage__DnHzC\",\"form\":\"Users_form__3KLd4\",\"searchForm\":\"Users_searchForm__2e9I3\",\"select\":\"Users_select__fmVxW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3x-3W\",\"header__wrapper\":\"Header_header__wrapper__2yuOb\",\"logo\":\"Header_logo__1dMId\",\"blockLogin\":\"Header_blockLogin__IiRZJ\"};","export default \"data:image/png;base64,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\"","import { RootState } from '../redux-store';\r\n\r\nexport const selectIsAuth = (state: RootState) => {\r\n    return state.auth.isAuthenticated;\r\n}\r\n\r\nexport const selectAuthorisedUserId = (state: RootState) => {\r\n    return state.auth.userId;\r\n}\r\n\r\nexport const selectAuthorisedLogin = (state: RootState) => {\r\n    return state.auth.login;\r\n}\r\n\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"user\":\"User_user__2eeD8\",\"avatar\":\"User_avatar__3NQn8\",\"selectedPage\":\"User_selectedPage__2Nsop\"};","import { PhotosType, ProfileType } from './../types/types';\r\nimport { instance, APIResponseType } from './api';\r\n\r\ntype DataPhotoType = {\r\n    photos: PhotosType\r\n}\r\n\r\nexport const profileAPI = {\r\n    async getUserStatus(userId: number) {\r\n        const response = await instance.get<string>(`profile/status/${userId}`);\r\n        return response.data;\r\n    },\r\n    async updateUserStatus(status: string) {\r\n        const response = await instance.put<APIResponseType>(`profile/status`, { status });\r\n        return response.data;\r\n    },\r\n    async getUserProfile(userId: number) {\r\n        const response = await instance.get<ProfileType>(`profile/${userId}`);\r\n        return response.data;\r\n    },\r\n    async savePhoto(filePhoto: any) {\r\n        const formData = new FormData();\r\n        formData.append(\"image\", filePhoto);\r\n        const response = await instance.put<APIResponseType<DataPhotoType>>(`profile/photo`, formData);\r\n        return response.data;\r\n    },\r\n    async saveProfile(profile: ProfileType) {\r\n        const response = await instance.put<APIResponseType>(\"profile\", profile);\r\n        return response.data;\r\n    },\r\n};","import { PhotosType } from \"../../types/types\";\r\nimport { profileAPI } from \"../../api/profile-api\";\r\nimport { RootState, InferActionsTypes } from \"../redux-store\";\r\nimport { ThunkAction } from \"redux-thunk\";\r\nimport { ResultCodeEnum } from \"../../api/api\";\r\nimport { PostType, ProfileType } from \"../../types/types\";\r\n\r\nexport type InitialStateType = typeof initialState;\r\n\r\nlet initialState = {\r\n    posts: [\r\n        {\r\n            id: 1,\r\n            message: `What Are We Building?\r\n        In this tutorial, well show how to build an interactive tic-tac-toe game with React.\r\n        \r\n        You can see what well be building here: Final Result. If the code doesnt make sense to you, or if you are unfamiliar with the codes syntax, dont worry! The goal of this tutorial is to help you understand React and its syntax.\r\n        \r\n        We recommend that you check out the tic-tac-toe game before continuing with the tutorial. One of the features that youll notice is that there is a numbered list to the right of the games board. This list gives you a history of all of the moves that have occurred in the game, and it is updated as the game progresses.\r\n        \r\n        You can close the tic-tac-toe game once youre familiar with it. Well be starting from a simpler template in this tutorial. Our next step is to set you up so that you can start building the game.`,\r\n            countLike: 15,\r\n            isLiked: false,\r\n        },\r\n        { id: 2, message: \"Hi, i'm learning React\", countLike: 20, isLiked: true },\r\n    ] as Array<PostType>,\r\n    profile: null as ProfileType | null,\r\n    status: \"\",\r\n    serverErrorMessage: \"\",\r\n};\r\n\r\n//state.profilePage\r\nconst profileReducer = (state = initialState, action: ActionTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case \"ADD_POST\": {\r\n            let numberId = state.posts[state.posts.length - 1].id;\r\n            let newPost = {\r\n                id: (numberId += 1),\r\n                message: action.newPostText,\r\n                countLike: 0,\r\n                isLiked: false,\r\n            };\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost],\r\n            };\r\n        }\r\n        case \"SET_USER_PROFILE\": {\r\n            return { ...state, profile: action.profile };\r\n        }\r\n        case \"SET_USER_STATUS\": {\r\n            return { ...state, status: action.status };\r\n        }\r\n        case \"SAVE_PHOTO_SUCCESS\": {\r\n            return { ...state, profile: { ...state.profile, photos: action.filePhoto } as ProfileType };\r\n        }\r\n        case \"CHANGE_LIKE\": {\r\n            return {\r\n                ...state,\r\n                posts: state.posts.map((post) => {\r\n                    if (post.id === action.id) {\r\n                        return { ...post, countLike: action.countLike, isLiked: action.isLiked };\r\n                    }\r\n                    return post;\r\n                }),\r\n            };\r\n        }\r\n        case \"SET_SERVER_ERROR\": {\r\n            return {\r\n                ...state,\r\n                serverErrorMessage: action.error,\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\ntype ActionTypes = InferActionsTypes<typeof actions>;\r\ntype ThunkType = ThunkAction<Promise<void>, RootState, unknown, ActionTypes>;\r\n\r\nexport const actions = {\r\n    addPost: (newPostText: string) => ({ type: \"ADD_POST\", newPostText } as const),\r\n    setUserProfile: (profile: ProfileType) => ({ type: \"SET_USER_PROFILE\", profile } as const),\r\n    setUserStatus: (status: string) => ({ type: \"SET_USER_STATUS\", status } as const),\r\n    savePhotoSuccess: (filePhoto: PhotosType) => ({ type: \"SAVE_PHOTO_SUCCESS\", filePhoto } as const),\r\n    setServerError: (error: string) => ({ type: \"SET_SERVER_ERROR\", error } as const),\r\n    setLike: (id: number, isLiked: boolean, countLike: number) =>\r\n        ({ type: \"CHANGE_LIKE\", id, isLiked, countLike } as const),\r\n};\r\n\r\nexport const getUserProfile =\r\n    (userId: number): ThunkType =>\r\n    async (dispatch) => {\r\n        let data = await profileAPI.getUserProfile(userId);\r\n        dispatch(actions.setUserProfile(data));\r\n    };\r\n\r\nexport const getUserStatus =\r\n    (userId: number): ThunkType =>\r\n    async (dispatch) => {\r\n        let data = await profileAPI.getUserStatus(userId);\r\n        dispatch(actions.setUserStatus(data));\r\n    };\r\n\r\nexport const updateUserStatus =\r\n    (status: string): ThunkType =>\r\n    async (dispatch) => {\r\n        let data = await profileAPI.updateUserStatus(status);\r\n        if (data.resultCode === ResultCodeEnum.Success) {\r\n            dispatch(actions.setUserStatus(status));\r\n        }\r\n    };\r\n\r\nexport const savePhoto =\r\n    (filePhoto: File): ThunkType =>\r\n    async (dispatch) => {\r\n        let data = await profileAPI.savePhoto(filePhoto);\r\n\r\n        if (data.resultCode === ResultCodeEnum.Success) {\r\n            dispatch(actions.savePhotoSuccess(data.data.photos));\r\n        }\r\n    };\r\n\r\nexport const saveProfile =\r\n    (profile: ProfileType): ThunkType =>\r\n    async (dispatch, getState) => {\r\n        const userId = getState().auth.userId;\r\n        let response = await profileAPI.saveProfile(profile);\r\n\r\n        if (response.resultCode === ResultCodeEnum.Success) {\r\n            if (userId !== null) {\r\n                dispatch(getUserProfile(userId));\r\n            } else {\r\n                throw new Error(\"userId can't be null\");\r\n            }\r\n        } else {\r\n            dispatch(actions.setServerError(response.messages[0]));\r\n            return Promise.reject(response.messages[0]);\r\n        }\r\n    };\r\n\r\nexport default profileReducer;\r\n","import { InferActionsTypes } from './redux-store';\r\nimport { DialogItemType, MessageItemType } from \"../types/types\";\r\n\r\nlet initialState = {\r\n    dialogs: [\r\n        { id: 1, name: \"Sasha\" },\r\n        { id: 2, name: \"Oleg\" },\r\n        { id: 3, name: \"Aleksej\" },\r\n        { id: 4, name: \"Svetlana\" },\r\n        { id: 5, name: \"Nastya\" },\r\n    ] as Array<DialogItemType>,\r\n    messages: [\r\n        { id: 1, message: \"Hi!\" },\r\n        { id: 2, message: \"Hi!\" },\r\n        { id: 3, message: \"How are you?\" },\r\n        { id: 4, message: \"I'm fine, thank you!\" },\r\n    ] as Array<MessageItemType>,\r\n};\r\n\r\nexport type InitialStateType = typeof initialState;\r\n\r\n//state.dialogsPage\r\nconst dialogsReducer = (state = initialState, action: ActionTypes): InitialStateType=> {\r\n    switch (action.type) {\r\n        case 'SN/DIALOG/SEND_MESSAGE': {\r\n            let numberId = state.messages[state.messages.length-1].id;\r\n            let newMessage = {\r\n                id: (numberId += 1),\r\n                message: action.newMessageText,\r\n            };\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, newMessage],\r\n            };\r\n        }\r\n        case 'SN/DIALOG/DELETE_MESSAGE': {\r\n            return { ...state, messages: state.messages.filter(message => message.id !== action.messageId)}\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\ntype ActionTypes = InferActionsTypes<typeof actions>;\r\n\r\nexport const actions = {\r\n    sendMessage: (newMessageText: string) => ({ type: 'SN/DIALOG/SEND_MESSAGE', newMessageText } as const),\r\n    deleteMessage: (messageId: number) => ({ type: 'SN/DIALOG/DELETE_MESSAGE', messageId } as const)\r\n}\r\n\r\nexport default dialogsReducer;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ring\":\"Preloader_ring__26pv4\"};","import axios from \"axios\";\r\nimport { UserType } from \"../types/types\";\r\n\r\nexport const instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: \"https://social-network.samuraijs.com/api/1.0/\",\r\n    headers: {\r\n        \"API-KEY\": \"9261c8c8-868c-4e38-8016-84c33dad6b8d\",\r\n    },\r\n});\r\n\r\nexport type APIResponseType <D = {}, RC = ResultCodeEnum> = {\r\n    data: D,\r\n    messages: Array<string>,\r\n    resultCode : RC\r\n}\r\n\r\nexport type GetUsersResponseType = {\r\n    items: Array<UserType>,\r\n    totalCount: number,\r\n    error: string | null\r\n}\r\n\r\nexport enum ResultCodeEnum {\r\n    Success = 0,\r\n    Error = 1\r\n}\r\n\r\n export enum ResultCodeForCapture {\r\n    CaptchaIsRequired = 10\r\n}\r\n"],"sourceRoot":""}